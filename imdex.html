<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>🏥 نظام حسابات التخدير</title>
  <style>
    body {font-family: Tahoma, sans-serif; background:#f0f2f5; direction: rtl; text-align: center;}
    .container {max-width:600px; margin:30px auto; padding:20px; background:#fff; border-radius:15px; box-shadow:0 0 10px rgba(0,0,0,0.1);}
    h2 {margin-bottom:20px;}
    button {margin:8px; padding:10px 20px; border:none; border-radius:10px; cursor:pointer; background:#007bff; color:#fff; font-size:16px;}
    button:hover {background:#0056b3;}
    input, select {margin:5px; padding:8px; border:1px solid #ccc; border-radius:8px;}
    .hidden {display:none;}
    #sideEffects {margin-top:15px; padding:10px; border:1px dashed #999; border-radius:10px; background:#fafafa;}
    .sideEffect {margin:5px 0; color:#b30000;}
  </style>
</head>
<body>
  <div class="container">
    <h2>🏥 نظام حسابات التخدير</h2>

    <!-- القائمة الرئيسية -->
    <div id="mainMenu">
      <button onclick="showPage('dosePage')">💉 حساب جرعات التخدير</button>
      <button onclick="showPage('fluidPage')">💧 حساب السوائل والدم</button>
      <button onclick="showPage('laryngoPage')">🩺 حجم اللارنغوسكوب</button>
    </div>

    <!-- صفحة جرعات التخدير -->
    <div id="dosePage" class="hidden">
      <h3>💉 حساب جرعات التخدير</h3>
      <label>الوزن (كغ):</label><br>
      <input type="number" id="weight"><br>
      <label>العمر (سنة):</label><br>
      <input type="number" id="age"><br>
      <label>اختر الدواء:</label><br>
      <select id="drug"></select><br>
      <button onclick="calculateDose()">احسب الجرعة</button>
      <div id="result"></div>
      <div id="sideEffects"></div>
      <br><button onclick="showPage('mainMenu')">⬅️ رجوع</button>
    </div>

    <!-- صفحة السوائل والدم -->
    <div id="fluidPage" class="hidden">
      <h3>💧 حساب السوائل والدم</h3>
      <label>الوزن (كغ):</label><br>
      <input type="number" id="fWeight"><br>
      <label>العمر (سنة):</label><br>
      <input type="number" id="fAge"><br>
      <button onclick="calculateFluids()">احسب</button>
      <div id="fluidResult"></div>
      <br><button onclick="showPage('mainMenu')">⬅️ رجوع</button>
    </div>

    <!-- صفحة اللارنغوسكوب -->
    <div id="laryngoPage" class="hidden">
      <h3>🩺 حجم اللارنغوسكوب</h3>
      <label>العمر (سنة):</label><br>
      <input type="number" id="lAge"><br>
      <button onclick="calculateLaryngo()">احسب</button>
      <div id="laryngoResult"></div>
      <br><button onclick="showPage('mainMenu')">⬅️ رجوع</button>
    </div>
  </div>

  <script>
    // قاعدة بيانات أدوية (مثال)
    let drugsData = {
      "بروبوفول": {dosePerKg:2, side:["هبوط ضغط","تثبيط تنفس"], treatment:["إعطاء سوائل + رفع ضغط","أوكسجين + دعم التنفس"]},
      "كيتامين": {dosePerKg:1.5, side:["زيادة ضربات القلب","هلوسة"], treatment:["مراقبة + تهدئة","إعطاء بنزوديازبين"]}
    };

    // تحميل قائمة الأدوية
    window.onload = ()=>{
      let drugSel=document.getElementById("drug");
      for(let d in drugsData){
        let opt=document.createElement("option");
        opt.value=d; opt.innerText=d;
        drugSel.appendChild(opt);
      }
    };

    // إظهار/إخفاء الصفحات
    function showPage(id){
      document.querySelectorAll(".container > div").forEach(el=>el.classList.add("hidden"));
      document.getElementById(id).classList.remove("hidden");
    }

    // حساب جرعة التخدير
    function calculateDose(){
      let w=parseFloat(document.getElementById("weight").value);
      let drug=document.getElementById("drug").value;
      if(!w || !drug) return alert("أدخل البيانات كاملة");
      let dose=w*drugsData[drug].dosePerKg;
      document.getElementById("result").innerHTML=✅ الجرعة: <b>${dose.toFixed(2)}</b> ملغ;
      let sideHTML="";
      for(let i=0;i<drugsData[drug].side.length;i++){
        sideHTML+=<div class="sideEffect"><b>${drugsData[drug].side[i]}</b>: ${drugsData[drug].treatment[i]}</div>;
      }
      document.getElementById("sideEffects").innerHTML=sideHTML;
    }
    // حساب السوائل والدم
    function calculateFluids(){
      let w=parseFloat(document.getElementById("fWeight").value);
      let age=parseFloat(document.getElementById("fAge").value);
      if(!w||!age) return alert("أدخل البيانات كاملة");
      let fluids=w*100; // مثال: 100 مل/كغ
      let blood=w*80;   // مثال: 80 مل/كغ
      document.getElementById("fluidResult").innerHTML=
        💧 السوائل: <b>${fluids} مل</b><br>🩸 حجم الدم: <b>${blood} مل</b>;
    }

    // حساب حجم اللارنغوسكوب
    function calculateLaryngo(){
      let age=parseFloat(document.getElementById("lAge").value);
      if(isNaN(age)) return alert("أدخل العمر");
      let size="";
      if(age<1) size="0";
      else if(age<2) size="1";
      else if(age<5) size="2";
      else if(age<12) size="3";
      else size="4";
      document.getElementById("laryngoResult").innerHTML=✅ المقاس المناسب: <b>${size}</b>;
    }
  </script>
</body>
</html>
